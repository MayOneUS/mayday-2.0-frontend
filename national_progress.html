---
layout: default
title: National Progress
permalink: /national-progress/
bodyClass: national-progress
---
{% capture content %}

<style type="text/css">

<style>

body {
  background-image:url('crowd.jpg');
  background-size:cover;
  background-position:center;
}

.jumbotron {
  overflow:hidden;
}

#map {
  height: 450px;
  font-family:"Rubik", sans-serif;
  color:#212230;
  position:relative;
  cursor:initial;
}

@media only screen and (max-width:800px) {
  #map {
    height:300px;
  }
}

@media only screen and (max-width:400px) {
  #map {
    height:200px;
  }
}

.leaflet-container {
  background:transparent;
  overflow:visible;
  clear:both;
  font: 12px/1 "Rubik", sans-serif;
  color:#212230;
}

.leaflet-control-container {
  max-width: 33%;
}

.legend {
  line-height: 18px;
  color: #555;
}

.legend span {
  display:block;
  margin: 4px;
}

.legend i {
  width: 16px;
  height: 16px;
  vertical-align: text-bottom;
  display:inline-block;
  margin-right: 3px;
  opacity: 0.7;
}

.legend i:before {
  content:' ';
  width: 100%;
  display:block;
}

.info {
  padding: 6px 8px 4px;
  background: white;
  box-shadow: 0 0 6px rgba(0, 0, 0, 0.15);
  border-radius: 2px;
  line-height: 1.5;
}

.info h4 {
  margin: 0 0 5px;
  color: #777;
}

.leaflet-rrose-content-wrapper {
  background: #fff;
  box-shadow: 0 0 6px rgba(0,0,0,.15);
  border-radius: 2px;
  text-align:left;
  z-index:999;
}

.leaflet-rrose-content {
  margin: 10px;
}

.leaflet-rrose-content h4 {
  line-height:1;
  margin:0;
}

.leaflet-rrose-content p {
  line-height:1.15;
  margin: 0 0 5px;
  font-size:12px;
}

</style>

{% include jumbotrons/20160721_national-progress-jumbo.html title="National Progress" subtitle="Mapping Our Strategy" %}

<div class="page-panel light">
  <div class="container">
    <div id="get-involved" class="col-lg-10 center-block col-sm-9 content-section text-center">
      <h2>Volunteer</h2>
      <h4 class="margin-bottom-sm">Join a Google Group</h4>
      <a href="" target="_blank" class="btn btn-mayday btn-small margin-bottom-xs" style="display:inline-block;width:auto; padding:5px 10px; font-size:14px;">Activism</a>  <a href="" target="_blank" class="btn btn-mayday btn-small margin-bottom-xs" style="display:inline-block;width:auto; padding:5px 10px; font-size:14px;">Welcoming</a>  <a href="" target="_blank" class="btn btn-mayday btn-small margin-bottom-xs" style="display:inline-block;width:auto; padding:5px 10px; font-size:14px;">Press</a>  <a href="" target="_blank" class="btn btn-mayday btn-small margin-bottom-xs" style="display:inline-block;width:auto; padding:5px 10px; font-size:14px;">Video</a>  <a href="" target="_blank" class="btn btn-mayday btn-small margin-bottom-xs" style="display:inline-block;width:auto; padding:5px 10px; font-size:14px;">Tech</a>  <a href="" target="_blank" class="btn btn-mayday btn-small margin-bottom-xs" style="display:inline-block;width:auto; padding:5px 10px; font-size:14px;">Social</a>  <a href="" target="_blank" class="btn btn-mayday btn-small margin-bottom-xs" style="display:inline-block;width:auto; padding:5px 10px; font-size:14px;">Media</a>  <a href="" target="_blank" class="btn btn-mayday btn-small margin-bottom-xs" style="display:inline-block;width:auto; padding:5px 10px; font-size:14px;">Fundraising</a>
      <h6 class="margin-bottom-xs">Or</h6>
      <a href="http://mayday-slack.herokuapp.com/" target="_blank" class="btn btn-mayday" style="display:inline-block; width:auto;">Join Our Slack Team</a>
      <h6 class="text-grey-medium margin-top-xs">Chat in real time with other MAYDAY.US volunteers and staff.</h6>
    </div>
  </div>
</div>
<div class="page-panel light">
  <div class="container">
    <div class="col-md-8 center-block panel-wrapper">
      {% include panels/panel_action_w_signup.html hide_next=true %}
    </div>
  </div>
</div>
{% endcapture %}

{% capture page_specific_javascript %}

<script>

jQuery( document ).ready(function() {

  jQuery.getJSON( "/geojson/mayday-map.geojson", function(json){ // load geojson and create map if successful
    
      statesData = json; // store result in variable
  
      var map = L.map('map',{
         zoomControl:false,
         attributionControl: false
      }).setView([37, -96], 4.25); // create map centered on USA
      
      var usaCornerA  = L.latLng(37,-125),
          usaCornerB  = L.latLng(38,-65),
          usaBounds   = L.latLngBounds(usaCornerA, usaCornerB);
            
      map.dragging.disable();
      map.touchZoom.disable();
      map.doubleClickZoom.disable();
      map.scrollWheelZoom.disable();
      map.fitBounds(usaBounds);
      
      // color ramp: grey, red orange, yellow, blue
     
      function getColor(d) {
      return d > .75 ?  '#0054b9' :
             d > .5  ?  '#2ac4ea' :
             d > .25 ?  '#0ad6b2' :
             d > 0   ?  '#fdd63f' :
             d == 0  ?  '#f36433' :
                        '#dae4e7' ;
      }
      
      // add style to states
      
      function style(feature) {
        return {
          fillColor: getColor(feature.properties.demoIndexB),
          weight: 1,
          opacity: 1,
          color: '#212230',
          joinline: 'round',
          fillOpacity: 0.6
        };
      }
      
      // add style to map
      
      L.geoJson(statesData, {style: style}).addTo(map);
      
      // highlight function
     
      
      var geojson;
      // ... our listeners
      //geojson = L.geoJson();
      
      function zoomToFeature(e) {
          map.fitBounds(e.target.getBounds());
      }
      
      function stateMouseOver(e) {
        var layer = e.target;
        var hover_bubble = new L.layer.Rrose({ offset: new L.Point(0,-10), closeButton: false, autoPan: false }).setContent(feature.properties.stateName).setLatLng(e.latlng).openOn(map);
      }
      
      function stateMouseOut(e) {
        var layer = e.target;
        geojson.resetStyle(layer);
        map.closePopup();
      }
      
      function onEachFeature(feature, layer) {
          layer.on({
            mouseover: highlightFeature,
            mouseout: resetHighlight//,
            //click: zoomToFeature
          });
        }
        
        geojson = L.geoJson(statesData, {
          
          style: style,
          
          onEachFeature: function(feature,layer){
            
            // hover events
            
            layer.on('mouseover mousemove', function(e){
              
              function getStateInfo(props) {   
                if (props) {
                  var stateInfo = "<h4 class='margin-bottom-0'>" + props.stateName + "</h4>";
                  
                  if (feature.properties.demoIndexB > .75) {
                    stateInfo +="<h6 class='margin-bottom-0' style='color:#0054b9'>Statewide Public Financing System</h6>"
                  } else if (props.demoIndexB > .5) {
                    stateInfo +="<h6 class='margin-bottom-0' style='color:#2ac4ea'>Needs State Improvement</h6>"
                  } else if (props.demoIndexB > .25) {
                    stateInfo +="<h6 class='margin-bottom-0' style='color:#0ad6b2'>Some Local Public Financing</h6>"
                  } else if (props.demoIndexB > 0) {
                    stateInfo +="<h6 class='margin-bottom-0' style='color:#fdd63f'>Needs Local Improvement</h6>"
                  } else if (props.demoIndexB == 0) {
                    stateInfo +="<h6 class='margin-bottom-0' style='color:#f36433'>No Public financing</h6>"
                  } else {
                    stateInfo +="<h6 class='margin-bottom-0' style='color:#7b8082'>No Activity</h6>"
                  }
                  
                  if (props.programTyp) { stateInfo +="<p'><strong>Program Type: </strong>" + props.programTyp + "</p>"};
                  if (props.offices) { stateInfo +="<p><strong>Offices: </strong>" + props.offices + "</p>"};
                  if (props.Why) { stateInfo +="<p class='text-grey-dark'>" + props.Why + "</p>"};
                  return stateInfo;
                } else {
                  return 'Click on a state for a breakdown of our progress.';
                };
              };
              
              // tooltip using rrose
                            
              var hover_bubble = new L.Rrose({ offset: new L.Point(0,-10), closeButton: false, autoPan: false})
                .setContent(getStateInfo(feature.properties))
                .setLatLng(e.latlng)
                .openOn(map);
                
              // highlight style
                
              layer.setStyle({
                color: '#ffffff',
                fillOpacity: 1
              });
              
              // make sure layer is on top
              
              if (!L.Browser.ie && !L.Browser.opera) {
                  layer.bringToFront();
              }

            });
            
            // remove pop-up and styles
            
            layer.on('mouseout', function(e){
              map.closePopup();
              geojson.resetStyle(layer);
            });
            
            // open more information box
            /*
            layer.on('click', function(e){
              layer.setStyle({
                weight: 3
              });
              info.update(layer.feature.properties);
            });
            */
          }
          
        }).addTo(map);
        
        // legend
        
        var legend = L.control({position: 'bottomleft'});
        
        legend.onAdd = function (map) {
        
            var div = L.DomUtil.create('div', 'info legend hidden-xs'),
                grades = [ null, 0, .25, .5, .75, 1],
                labels = [ 'No Activity', 'No Public Financing', 'Needs Local Improvement', 'Some Local Programs', 'Needs State Improvement', 'Statewide Public Financing System'];
        
            // loop through our density intervals and generate a label with a colored square for each interval
            for (var i = 0; i < grades.length; i++) {
                div.innerHTML +=
                    '<span><i style="background:' + getColor(grades[i]) + '"></i> ' +
                    labels[i];
            }
        
            return div;
        };
        
        legend.addTo(map);
       
  });

});

</script>

{% endcapture %}

<!-- following line combines page scripts into footer scripts, below loaded libraries -->
{% capture footer_scripts %}{{footer_scripts}}{{page_specific_javascript}}{% endcapture %}


{% include sub_layouts/default_layout.html %}
